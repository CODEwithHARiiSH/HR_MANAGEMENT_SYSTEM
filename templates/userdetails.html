{% extends 'base.html' %}

{% block content %}
<div class="row">
  <div class="col-4">
    <h1> List of employees </h1>
    <p>
      <ol>
        {%for u in employees %}
        <li> <a href="{{url_for('employee_details', empid=u.id)}}">{{u.fname}} </a></li>
        {%endfor%}
      </ol>
    </div>
    <div class="col-8" >
      <div class="container" style="border:3px outset red;" >
        <h1> {{user.fname}}  {{user.lname}}</h1>
        <h3> Designation : {{user.designation.designation}} </h3>
        <hr>
        <table>
          <tr>
            <th> First name :</th>
            <td> {{user.fname}}</td>
          </tr>
          <tr>
            <th> Last name :</th>
            <td> {{user.lname}}</td>
          </tr>
          <tr>
            <th> Email :</th>
            <td> {{user.email}}</td>
          </tr>
    
          <tr>
            <th> Phone :</th>
            <td> {{user.phone}}</td>
          </tr>
        </table>
        <hr>
        <h2 style="text-align: center;"> Leave details</h2>
        <table>
            <tr>
              <th> Leave taken :</th>
              <td> {{leave}}</td>
            </tr>
            <tr>
              <th> Maximum leave allowed :</th>
              <td> {{user.designation.max_leaves}}</td>
            </tr>
            <tr>
              <th> Remaining leaves :</th>
              <td> {{user.designation.max_leaves - leave}}</td>
            </tr>
            <tr>
              <th>Dates taken :</th>
              <td>
                {% for i in dates %}
                {{i}} |
                {% endfor %}
              </td>
            </tr>
          </table>
    
          <hr>

        <h4> Add leaves </h4>
<form action="{{ url_for('add_leaves', empid=user.id) }}" method="post">

    <input type="date" id="date" name="date" placeholder="Date" ><br>
    <textarea id="reason" name="reason" rows="4" cols="50" placeholder="Reason" ></textarea><br>

    <input type="submit" value="Submit">
    
</form>
      <hr>
      <br>
        {% if user.id == last_id  %}
        <button> <a href="{{url_for('employee_details', empid=(user.id) - 1)}}">Previous</a></button>
        {% elif user.id == first_id%}
        <button> <a href="{{url_for('employee_details', empid=(user.id) + 1)}}">Next</a></button>
        {% else %}
        <button> <a href="{{url_for('employee_details', empid=(user.id) - 1)}}">Previous</a></button>
        <button> <a href="{{url_for('employee_details', empid=(user.id) + 1)}}">Next</a></button>
        {% endif %}
        <br>
        <br>
    </div>
    </div>
    </div>
{% endblock %}